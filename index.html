<!-- 
 File:      index.html 
 Author:    Maxximillion Thomas
 Purpose:   Web page for practicing chess against Stockfish chess bots
 Date:      December 9, 2025
 -->

<!-- Meta Data -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockfish</title>

    <!-- Icon -->
    <link rel="icon" type="image/png" href="./img/logo.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="./css/chessboard-1.0.0.css">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/press-start-2p.css">
    <link rel="stylesheet" href="./css/rubik.css" >
</head>

<!-- Body -->
<body>
    <!-- Title -->
    <div id="titleContainer" class="title-container">
        <img src="./img/logo.png" alt="Blockfish Logo" class="logo">
        <h1 class="title">Blockfish</h1>
        <h2 class="subtitle">Minecraft-Themed Stockfish Practice</h2>
    </div>

    <!-- Menu -->
    <div id="menuContainer" class="menu-container">

        <!-- Bot difficulty selection -->
        <div class="menu-row difficulty-container ">
            <div><u>D</u>ifficulty:</div>

            <!-- Category -->
            <div class="category-selector">
                <button id="catPrevious" class="menu-button" data-tooltip="Lower the difficulty category">&lt;</button>
                <span id="categoryDisplay"></span>
                <button id="catNext" class="menu-button" data-tooltip="Increase the difficulty category">&gt;</button>
            </div>

            <!-- Elo -->
            <div class="elo-selector">
                <span data-tooltip="Adjust the bot Elo (skill level)" class="tooltip-bottom"><input type="range" id="eloSlider" min="100" max="500" step="100" value="100"></span>
                <span id="eloDisplay" >Elo: 100</span>
            </div>
        </div>

        <!-- Player color radio buttons -->
        <div class="menu-row">
            <label for="color">Play as: </label>
            <label data-tooltip="Play as White"><input type="radio" id="white" name="color" value="white" checked class="menu-item-interactive"><u>W</u>hite</label>
            <label data-tooltip="Play as Black"><input type="radio" id="black" name="color" value="black" class="menu-item-interactive"><u>B</u>lack</label>
        </div>

        <!-- Start new game button -->
        <div>
            <button id="startBtn" class="menu-button" data-tooltip="Start a new game using the current settings"><u>S</u>tart New Game</button>
        </div>

    </div>

    <!-- Master container -->
    <div id="masterContainer" class="master-container">

        <!-- Game container -->
        <div id="gameContainer" class="game-container">

            <!-- Turn status & preferences -->
            <div class="header-row">
                <div id="status" class="status">Turn: Loading...</div>
                <button id="optionsBtn" class="control-btn" data-tooltip="Manage preferences (P key)" aria-label="Manage preferences (P key)">☰</button>
            </div>

            <!-- Evaluation bar & chess board   -->
            <div class="eval-board-container">

                <!-- Evaluation bar -->
                <div class="eval-container" id="evalContainer">
                    <div id="evalBar" class="eval-bar-fill"></div>
                    <div id="evalScore" class="eval-score">0.0</div>
                </div>

                <!-- Chess board -->
                <div id="myBoard" class="board"></div>
            </div>

            <!-- Game container bottom control row -->
            <div class="control-row">

                <!-- Undo previous move -->
                <button id="undoBtn" class="control-btn" data-tooltip="Undo the previous move (U key)" aria-label="Undo the previous move">&#8630;</button>
                
                <!-- Navigation controls -->
                <div class="navigation-controls">
                    <button id="firstBtn" class="control-btn" data-tooltip="View the first move (F key)" aria-label="View the first move (F key)">&laquo;</button>
                    <button id="backBtn" class="control-btn" data-tooltip="View the previous move (left arrow key)" aria-label="View the previous move (left arrow key)">&lsaquo;</button>
                    <button id="forwardBtn" class="control-btn" data-tooltip="View the next move (right arrow key)" aria-label="View the next move (right arrow key)">&rsaquo;</button>
                    <button id="lastBtn" class="control-btn" data-tooltip="View the last move (L key)" aria-label="View the last move (L key)">&raquo;</button>
                </div>

                <!-- Hint (best move) -->
                <button id="hintBtn" class="control-btn" data-tooltip="Receive a hint (H key)" aria-label="Receive a hint (H key)">☀︎</button>

                <!-- Resign game -->
                <button id="resignBtn" class="control-btn" data-tooltip="Resign the match for a loss (R key)" aria-label="Resign the match for a loss (R key)">&#9872;</button>
            </div>
        </div>

        <!-- Move history analysis -->
        <div id="moveHistoryAnalysisContainer" class="move-history-analysis-container">

            <!-- Analysis summary -->
            <div id="analysisPane" class="analysis-pane">

                <!--  Loading bar -->
                <div id="analysisLoader">
                    <div class="analysis-loading-text">Analyzing moves...<span id="analysisPercent">0</span>%</div>
                    <div class="analysis-progress-container">
                        <div id="analysisProgressBar" class="analysis-progress-fill"></div>
                    </div>
                </div>

                <!-- Move summary -->
                <div id="analysisResult">
                    <span class="analysis-header">Move summary:</span>
                    <div id="analysisSummary" class="analysis-summary"></div>
                    <div id="accuracyText" class="analysis-footer">Average accuracy:</div>
                </div>
            </div>

            <!-- Move history -->
            <!-- Header -->
            <div class="move-history-header">
                <table class="move-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>White</th>
                            <th>Black</th>
                        </tr>
                    </thead>
                </table>
            </div>

            <!-- Moves -->
            <div id="pgn" class="pgn">
                <table class="move-table">
                    <tbody id="moveHistoryBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Game over modal -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content">
            <span id="gameOverModalCloseBtn" class="close-btn" data-tooltip="Exit to the menu (Esc key)">&times;</span>

            <h2 id="gameResult">Game Over</h2>
            <p id="gameReason">Checkmate</p>

            <button id="rematchBtn" class="rematch-btn" data-tooltip="Rematch with the same settings"><u>R</u>ematch</button>
            <button id="gameReviewBtn" class="game-review-btn" data-tooltip="Review the previous game"><u>G</u>ame review</button>
        </div>
    </div>

    <!-- Options modal -->
    <div id="optionsModal" class="modal">
        <div class="modal-content">
            <span id="optionsModalCloseBtn" class="close-btn" data-tooltip="Close this window (Esc key)" aria-label="Close this window (Esc key)">&times;</span>

            <h2>Options</h2>

            <!-- Toggle move highlighting -->
            <div class="control-row">
                <label><u>H</u>ighlight legal moves:</label>
                <label class="switch" data-tooltip="Highlight legal moves for the selected piece">
                    <input type="checkbox" id="optionsModalHighlightsCheckbox" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Toggle evaluation bar -->
            <div class="control-row">
                <label><u>E</u>valuation bar:</label>
                <label class="switch" data-tooltip="Show evaluation score bar">
                    <input type="checkbox" id="optionsModalEvalBarCheckbox" checked>
                    <span class="slider"></span>
                </label>
            </div>

            <!-- Moving preference radio buttons -->
            <div class="control-row">
                <label for="optionsModalMovingPreference">Moving: </label>
                <label data-tooltip="Click to move pieces"><input type="radio" id="moveClick" name="optionsModalMovingPreference" value="click" class="menu-item-interactive"><u>C</u>lick</label>
                <label data-tooltip="Drag to move pieces"><input type="radio" id="moveDrag" name="optionsModalMovingPreference" value="drag" class="menu-item-interactive"><u>D</u>rag</label>
                <label data-tooltip="Click or drag to move pieces"><input type="radio" id="moveBoth" name="optionsModalMovingPreference" value="both" class="menu-item-interactive" checked><u>B</u>oth</label>
            </div>
        </div>
    </div>

    <!-- Yes/No modal -->
    <div id="yesNoModal" class="modal">
        <div class="modal-content">
            <span id="yesNoCloseBtn" class="close-btn" data-tooltip="Close this window (Esc key)" aria-label="Close this window (Esc key)"></span>>&times;</span>

            <h2>Confirm</h2>
            <p id="confirmText">Confirm resignation?</p>

            <button id="yesBtn" class="yes-btn" data-tooltip="Confirm choice"><u>Y</u>es</button>
            <button id="noBtn" class="no-btn" data-tooltip="Cancel choice"><u>N</u>o</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="./js/chessboard-1.0.0.js"></script>
    <script src="./js/chess-rules.js"></script>
    <script src="./js/main.js"></script>

</body>
</html>